<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootcamp > Week 2 > Day 3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="/swe/favicon.ico">
    <link rel="stylesheet" href="/swe/modest.css">
    <link rel="stylesheet" href="/swe/prism.css">
    <link rel="stylesheet" href="/swe/style.css">
  </head>
  <body>
    <h1>Bootcamp > Week 2 > Day 3</h1>
    <h2>Overview of the day</h2>
    <p>More SQLite3 only now via Node.js.</p>
    <h1>Session 1 - SQLite3 in Node.js</h1>
    <h2>Learning Objectives</h2>
    <ul>
      <li>Install and initiate a database in a Node.js project</li>
      <li>Execute queries on our database in Node.js</li>
      <li>Implement a recursive function</li>
    </ul>
    <h2>Pre-work or Assumed knowledge</h2>
    <h2>Materials</h2>
    <ul>
      <li><a href="https://raw.githubusercontent.com/WhiteHatLearningProducts/airports/master/airportsData.json">airports.json</a> file from week <em>you can run the following command to download the file into your project folder</em></li>
    </ul>
    <pre><code class="language-sh">curl https://raw.githubusercontent.com/WhiteHatLearningProducts/airports/master/airportsData.json --output airports.json
</code></pre>
    <h2>Notes</h2>
    <p>The idea in this session is to load the airport data into the database. Walk through setting up SQLite3 in Node.js. It's a great opportunity to go back over their understanding of async functions and the pending callback stack. Dealing with multiple async functions using the recursive pattern seems to fit here really well. The recursive pattern keeps the call stacks small and is considered a more effective ("How Javascript Works - How Tail Calls Work" Douglas Crockford chpt 18.2).</p>
    <p>In this session we have a really nice dual layer of complexity; we are programming in javascript and executing SQL statements on a database.</p>
    <h2>Assignment</h2>
    <p>Tricky challenge. Make sure you are clear about whats being asked here.</p>
    <h2>Additional Reading</h2>
    <h1>Session 2 - Consolidate SQLite3 in Node.js</h1>
    <h2>Learning Objectives</h2>
    <ul>
      <li>Implement nested iteration</li>
      <li>Relate data using foreign keys correctly</li>
    </ul>
    <h2>Pre-work or Assumed knowledge</h2>
    <ul>
      <li>Loaded an array of data into a database</li>
    </ul>
    <h2>Materials</h2>
    <pre><code class="language-sh">curl https://raw.githubusercontent.com/WhiteHatLearningProducts/restaurant-data/master/restaurants.json --output restaurants.json
</code></pre>
    <h2>Notes</h2>
    <p>Building on the mornings activity. Now things get more complex as we have a nested array. You might need to remind apprentices of this piece of SQLite3 API:</p>
    <pre><code class="language-javascript">db.run('YOUR SQL QUERY;', function (error) {
    /* this callback function runs after Node.js has 
    run the query on sqlite3 database, and the database 
    has emitted an event saying it's finished. In this 
    callback function on the `this` context you can 
    access the id of the last record you inserted. 
    This will be useful later */
    const id = this.lastID
})
</code></pre>
    <p>You can imagine here they will be inserting a restaurant, need to capture the <code>restaurant_id</code> value and use that when they iterate over the menus, and then capture the <code>menu_id</code> to insert the items correctly.</p>
    <h2>Assignment</h2>
    <p>Look for a set of tests that crawl over the model.</p>
    <h2>Additional Reading</h2>
    <script src="/swe/prism.js"></script>
    <script src="/swe/tabbed-code-blocks.js"></script>
  </body>
</html>
